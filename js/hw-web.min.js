!function(a){var b=[],c=function(){},d={defaultPath:"/",before:c,on:c,notfound:c},e={current:null,previous:null,config:function(a){for(var b in a)a.hasOwnProperty(b)&&(d[b]=a[b]);return e},add:function(a,c,d){return a&&c&&("function"==typeof c&&(d=c,c=null),b.push({path:a,name:c,fn:d||function(){}})),e},go:function(a){return location.hash=a,e},back:function(a){return e.previous?(history.back(),e.previous=null):a&&(location.hash=a),e}},f=function(){var a=location.hash.slice(1),c=!1,f=e.current;a||(a=d.defaultPath),
f&&f!=e.previous&&(e.previous=f),e.current=a;for(var g=0,h=b.length;g<h&&!c;g++){var i=b[g],j=i.path,k=i.name,l=i.fn;if("string"==typeof j)j.toLowerCase()==a.toLowerCase()&&(d.before.call(e,j,k),l.call(e),d.on.call(e,j,k),c=!0);else{var m=a.match(j);m&&(d.before.call(e,j,k,m),l.apply(e,m),d.on.call(e,j,k,m),c=!0)}}return c||d.notfound.call(e),e};e.init=function(b){return a.addEventListener("hashchange",f),f()},e.reload=f,a.ruto=e}(window),function(a,b){function c(a,c){d.addType(a,function(f,g,h){
var i,j,k,l,m=g,n=(new Date).getTime();if(!f){m={},l=[],k=0;try{for(f=c.length;f=c.key(k++);)e.test(f)&&(j=JSON.parse(c.getItem(f)),j.expires&&j.expires<=n?l.push(f):m[f.replace(e,"")]=j.data);for(;f=l.pop();)c.removeItem(f)}catch(a){}return m}if(f="__amplify__"+f,g===b){if(i=c.getItem(f),j=i?JSON.parse(i):{expires:-1},!(j.expires&&j.expires<=n))return j.data;c.removeItem(f)}else if(null===g)c.removeItem(f);else{j=JSON.stringify({data:g,expires:h.expires?n+h.expires:null});try{c.setItem(f,j)}catch(b){
d[a]();try{c.setItem(f,j)}catch(a){throw d.error()}}}return m})}var d=a.store=function(a,b,c){var e=d.type;return c&&c.type&&c.type in d.types&&(e=c.type),d.types[e](a,b,c||{})};d.types={},d.type=null,d.addType=function(a,b){d.type||(d.type=a),d.types[a]=b,d[a]=function(b,c,e){return e=e||{},e.type=a,d(b,c,e)}},d.error=function(){return"amplify.store quota exceeded"};var e=/^__amplify__/;for(var f in{localStorage:1,sessionStorage:1})try{window[f].setItem("__amplify__","x"),window[f].removeItem("__amplify__"),
c(f,window[f])}catch(a){}if(!d.types.localStorage&&window.globalStorage)try{c("globalStorage",window.globalStorage[window.location.hostname]),"sessionStorage"===d.type&&(d.type="globalStorage")}catch(a){}!function(){if(!d.types.localStorage){var a=document.createElement("div"),c="amplify";a.style.display="none",document.getElementsByTagName("head")[0].appendChild(a);try{a.addBehavior("#default#userdata"),a.load(c)}catch(b){return void a.parentNode.removeChild(a)}d.addType("userData",function(e,f,g){
a.load(c);var h,i,j,k,l,m=f,n=(new Date).getTime();if(!e){for(m={},l=[],k=0;h=a.XMLDocument.documentElement.attributes[k++];)i=JSON.parse(h.value),i.expires&&i.expires<=n?l.push(h.name):m[h.name]=i.data;for(;e=l.pop();)a.removeAttribute(e);return a.save(c),m}if(e=e.replace(/[^\-._0-9A-Za-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c-\u200d\u203f\u2040\u2070-\u218f]/g,"-"),e=e.replace(/^-/,"_-"),f===b){if(h=a.getAttribute(e),i=h?JSON.parse(h):{expires:-1},!(i.expires&&i.expires<=n))return i.data;
a.removeAttribute(e)}else null===f?a.removeAttribute(e):(j=a.getAttribute(e),i=JSON.stringify({data:f,expires:g.expires?n+g.expires:null}),a.setAttribute(e,i));try{a.save(c)}catch(b){null===j?a.removeAttribute(e):a.setAttribute(e,j),d.userData();try{a.setAttribute(e,i),a.save(c)}catch(b){throw null===j?a.removeAttribute(e):a.setAttribute(e,j),d.error()}}return m})}}(),function(){function a(a){return a===b?b:JSON.parse(JSON.stringify(a))}var c={},e={};d.addType("memory",function(d,f,g){return d?f===b?a(c[d]):(e[d]&&(clearTimeout(e[d]),
delete e[d]),null===f?(delete c[d],null):(c[d]=f,g.expires&&(e[d]=setTimeout(function(){delete c[d],delete e[d]},g.expires)),f)):a(c)})}()}(this.amplify=this.amplify||{});var Hogan={};!function(a){function b(a,b,c){var d;return b&&"object"==typeof b&&(void 0!==b[a]?d=b[a]:c&&b.get&&"function"==typeof b.get&&(d=b.get(a))),d}function c(a,b,c,d,e,f){function g(){}function h(){}g.prototype=a,h.prototype=a.subs;var i,j=new g;j.subs=new h,j.subsText={},j.buf="",d=d||{},j.stackSubs=d,j.subsText=f;for(i in b)d[i]||(d[i]=b[i]);
for(i in d)j.subs[i]=d[i];e=e||{},j.stackPartials=e;for(i in c)e[i]||(e[i]=c[i]);for(i in e)j.partials[i]=e[i];return j}function d(a){return String(null===a||void 0===a?"":a)}function e(a){return a=d(a),k.test(a)?a.replace(f,"&amp;").replace(g,"&lt;").replace(h,"&gt;").replace(i,"&#39;").replace(j,"&quot;"):a}a.Template=function(a,b,c,d){a=a||{},this.r=a.code||this.r,this.c=c,this.options=d||{},this.text=b||"",this.partials=a.partials||{},this.subs=a.subs||{},this.buf=""},a.Template.prototype={r:function(a,b,c){
return""},v:e,t:d,render:function(a,b,c){return this.ri([a],b||{},c)},ri:function(a,b,c){return this.r(a,b,c)},ep:function(a,b){var d=this.partials[a],e=b[d.name];if(d.instance&&d.base==e)return d.instance;if("string"==typeof e){if(!this.c)throw new Error("No compiler available.");e=this.c.compile(e,this.options)}if(!e)return null;if(this.partials[a].base=e,d.subs){b.stackText||(b.stackText={});for(key in d.subs)b.stackText[key]||(b.stackText[key]=void 0!==this.activeSub&&b.stackText[this.activeSub]?b.stackText[this.activeSub]:this.text);
e=c(e,d.subs,d.partials,this.stackSubs,this.stackPartials,b.stackText)}return this.partials[a].instance=e,e},rp:function(a,b,c,d){var e=this.ep(a,c);return e?e.ri(b,c,d):""},rs:function(a,b,c){var d=a[a.length-1];if(!l(d))return void c(a,b,this);for(var e=0;e<d.length;e++)a.push(d[e]),c(a,b,this),a.pop()},s:function(a,b,c,d,e,f,g){var h;return(!l(a)||0!==a.length)&&("function"==typeof a&&(a=this.ms(a,b,c,d,e,f,g)),h=!!a,!d&&h&&b&&b.push("object"==typeof a?a:b[b.length-1]),h)},d:function(a,c,d,e){
var f,g=a.split("."),h=this.f(g[0],c,d,e),i=this.options.modelGet,j=null;if("."===a&&l(c[c.length-2]))h=c[c.length-1];else for(var k=1;k<g.length;k++)f=b(g[k],h,i),void 0!==f?(j=h,h=f):h="";return!(e&&!h)&&(e||"function"!=typeof h||(c.push(j),h=this.mv(h,c,d),c.pop()),h)},f:function(a,c,d,e){for(var f=!1,g=null,h=!1,i=this.options.modelGet,j=c.length-1;j>=0;j--)if(g=c[j],f=b(a,g,i),void 0!==f){h=!0;break}return h?(e||"function"!=typeof f||(f=this.mv(f,c,d)),f):!e&&""},ls:function(a,b,c,e,f,g){var h=this.options.delimiters;
return this.options.delimiters=g,this.b(this.ct(d(a.call(b,f,c)),b,e)),this.options.delimiters=h,!1},ct:function(a,b,c){if(this.options.disableLambda)throw new Error("Lambda features disabled.");return this.c.compile(a,this.options).render(b,c)},b:function(a){this.buf+=a},fl:function(){var a=this.buf;return this.buf="",a},ms:function(a,b,c,d,e,f,g){var h,i=b[b.length-1],j=a.call(i);return"function"==typeof j?!!d||(h=this.activeSub&&this.subsText&&this.subsText[this.activeSub]?this.subsText[this.activeSub]:this.text,
this.ls(j,i,b,c,h.substring(e,f),g)):j},mv:function(a,b,c){var e=b[b.length-1],f=a.call(e);return"function"==typeof f?this.ct(d(f.call(e)),e,c):f},sub:function(a,b,c,d){var e=this.subs[a];e&&(this.activeSub=a,e(b,c,this,d),this.activeSub=!1)}};var f=/&/g,g=/</g,h=/>/g,i=/\'/g,j=/\"/g,k=/[&<>\"\']/,l=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}}("undefined"!=typeof exports?exports:Hogan),function(a){function b(a){return{id:a.id,title:a.link_text,url:a.link,
domain:a.source,points:a.points,user:a.submitter,time_ago:relativeDate(1e3*a.date),time:a.date,comments_count:a.comments,type:"link"}}function c(a){var c=[],d={visit_count:t,time_ago:relativeDate(1e3*s),type:"visit"};for(i=0;i<a.length;i++){u>s&&s>=a[i].date&&c.push(d),u=a[i].date;var e=b(a[i]);e.i=i+1,c.push(e)}return c}var d=function(){return+new Date},e=!!a.XDomainRequest,f="withCredentials"in new XMLHttpRequest||e,g=!1,h=2e4,j={};try{g=new Worker("js/hnapi-worker.js"),g.addEventListener("message",function(a){
var b=a.data,c=b.url||"";if(j[c]){var d=j[c],e=d.error,f=d.success;delete j[c],b.error?e(b.error):f(b.response)}},!1)}catch(a){}var k=function(b,c,i){if(c||(c=function(){}),i||(i=function(){}),f)if(g)j[b]={success:c,error:i},g.postMessage({url:b,timeout:h});else{var k=j[b]||(e?new XDomainRequest:new XMLHttpRequest);k._timeout&&clearTimeout(k._timeout),k._timeout=setTimeout(function(){k.abort()},h),k.onload=function(){clearTimeout(this._timeout),delete j[b];try{c(JSON.parse(this.responseText))}catch(a){
i(a)}},k.onerror=k.onabort=k.ontimeout=function(a){clearTimeout(this._timeout),delete j[b],i(a)},(k.readyState<=1||e)&&(k.open("GET",b+"?"+d(),!0),k.send()),j[b]=k}else{var l=a.document,m=l.createElement("script"),n="callback"+d();a[n]=c,m.onerror=i,m.src=b+"?callback="+n,l.body.appendChild(m)}},l=["https://node-hnapi-eu.herokuapp.com/","https://node-hnapi.azurewebsites.net/","https://node-hnapi-eus.azurewebsites.net/"],m=function(a){for(var b=a.length-1;b>0;b--){var c=Math.floor(Math.random()*(b+1)),d=a[b];
a[b]=a[c],a[c]=d}};m(l),l.unshift("https://api.hackerwebapp.com/");var n=l.length,o=function(a,b,c,d){var e=a<n-1?function(){o(a+1,b,c,d)}:d;k(l[a]+b,c,e)},p=function(a,b,c){k(l[0]+a,b,function(){o(0,a,b,c)})},q={urls:l,_news:function(a,b){p("news",a,b)},_news2:function(a,b){p("news2",a,b)},item:function(a,b,c){p("item/"+a,b,c)},comments:function(a,b,c){p("comments/"+a,b,c)}},r=Math.floor(new Date/1e3),s=amplify.store("last_visit")||r,t=amplify.store("num_visits")||0;t++,amplify.store("last_visit",r),
amplify.store("num_visits",t);var u=Number.MAX_SAFE_INTEGER;q.news=function(a,b,d){function e(a){var d;(next=amplify.store("next"))?d=dayjs(next):(lastItem=a[a.length-1],d=dayjs.unix(lastItem.time)),d=d.subtract(1,"day"),d=d.format("YYYYMMDD"),amplify.store("next",d);var e=c(a);b(e)}a=a||"latest";var f="news-"+a,g="https://p.leftium.com/p?u=https://hckrnews.com/data/"+a+".js",h="latest"==a?6e4:2592e6,i=amplify.store(f);i?e(i):(p1=fetch(g),text=p1.then(function(a){p2=a.json(),p2.then(function(a){a?(amplify.store(f,a,{
expires:h}),e(a)):d(null)})}))},a.hnapi=q}(window),function(a){var b=a.document,c=function(a,c){var d=b.documentElement,e=d.matchesSelector||d.mozMatchesSelector||d.webkitMatchesSelector||d.oMatchesSelector||d.msMatchesSelector;return e.call(a,c)},d=function(a,b){var d=!1;do d=c(a,b);while(!d&&(a=a.parentNode)&&a.ownerDocument);return!!d&&a};a.ibento=function(a,c,e){var f=b.body;f.addEventListener(c,function(b){var c=d(b.target,a);c&&e.call(f,b,c)})}}(window);var relativeDate=function(a){function b(b,c){
!c&&(c=(new Date).getTime()),c instanceof Date&&(c=c.getTime()),b instanceof Date&&(b=b.getTime());var d,e,f,g=c-b;for(e=-1,f=j.length;++e<f;)if(d=j[e],g<d[0])return d[2]==a?d[1]:Math.round(g/d[2])+" "+d[1]}var c=1e3,d=60*c,e=60*d,f=24*e,g=7*f,h=365*f,i=h/12,j=[[.7*d,"just now"],[1.5*d,"a minute ago"],[60*d,"minutes ago",d],[1.5*e,"an hour ago"],[f,"hours ago",e],[2*f,"yesterday"],[7*f,"days ago",f],[1.5*g,"a week ago"],[i,"weeks ago",g],[1.5*i,"a month ago"],[h,"months ago",i],[1.5*h,"a year ago"],[Number.MAX_VALUE,"years ago",h]];
return b}();"undefined"!=typeof module&&module.exports&&(module.exports=relativeDate),!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.dayjs=b()}(this,function(){"use strict";var a="millisecond",b="second",c="minute",d="hour",e="day",f="week",g="month",h="quarter",i="year",j=/^(\d{4})-?(\d{1,2})-?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d{1,3})?$/,k=/\[([^\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,l=function(a,b,c){
var d=String(a);return!d||d.length>=b?a:""+Array(b+1-d.length).join(c)+a},m={s:l,z:function(a){var b=-a.utcOffset(),c=Math.abs(b),d=Math.floor(c/60),e=c%60;return(b<=0?"+":"-")+l(d,2,"0")+":"+l(e,2,"0")},m:function(a,b){var c=12*(b.year()-a.year())+(b.month()-a.month()),d=a.clone().add(c,g),e=b-d<0,f=a.clone().add(c+(e?-1:1),g);return Number(-(c+(b-d)/(e?d-f:f-d))||0)},a:function(a){return a<0?Math.ceil(a)||0:Math.floor(a)},p:function(j){return{M:g,y:i,w:f,d:e,D:"date",h:d,m:c,s:b,ms:a,Q:h}[j]||String(j||"").toLowerCase().replace(/s$/,"");
},u:function(a){return void 0===a}},n={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},o="en",p={};p[o]=n;var q=function(a){return a instanceof u},r=function(a,b,c){var d;if(!a)return o;if("string"==typeof a)p[a]&&(d=a),b&&(p[a]=b,d=a);else{var e=a.name;p[e]=a,d=e}return c||(o=d),d},s=function(a,b,c){if(q(a))return a.clone();var d=b?"string"==typeof b?{
format:b,pl:c}:b:{};return d.date=a,new u(d)},t=m;t.l=r,t.i=q,t.w=function(a,b){return s(a,{locale:b.$L,utc:b.$u,$offset:b.$offset})};var u=function(){function l(a){this.$L=this.$L||r(a.locale,null,!0),this.parse(a)}var m=l.prototype;return m.parse=function(a){this.$d=function(a){var b=a.date,c=a.utc;if(null===b)return new Date(NaN);if(t.u(b))return new Date;if(b instanceof Date)return new Date(b);if("string"==typeof b&&!/Z$/i.test(b)){var d=b.match(j);if(d)return c?new Date(Date.UTC(d[1],d[2]-1,d[3]||1,d[4]||0,d[5]||0,d[6]||0,d[7]||0)):new Date(d[1],d[2]-1,d[3]||1,d[4]||0,d[5]||0,d[6]||0,d[7]||0);
}return new Date(b)}(a),this.init()},m.init=function(){var a=this.$d;this.$y=a.getFullYear(),this.$M=a.getMonth(),this.$D=a.getDate(),this.$W=a.getDay(),this.$H=a.getHours(),this.$m=a.getMinutes(),this.$s=a.getSeconds(),this.$ms=a.getMilliseconds()},m.$utils=function(){return t},m.isValid=function(){return!("Invalid Date"===this.$d.toString())},m.isSame=function(a,b){var c=s(a);return this.startOf(b)<=c&&c<=this.endOf(b)},m.isAfter=function(a,b){return s(a)<this.startOf(b)},m.isBefore=function(a,b){
return this.endOf(b)<s(a)},m.$g=function(a,b,c){return t.u(a)?this[b]:this.set(c,a)},m.year=function(a){return this.$g(a,"$y",i)},m.month=function(a){return this.$g(a,"$M",g)},m.day=function(a){return this.$g(a,"$W",e)},m.date=function(a){return this.$g(a,"$D","date")},m.hour=function(a){return this.$g(a,"$H",d)},m.minute=function(a){return this.$g(a,"$m",c)},m.second=function(a){return this.$g(a,"$s",b)},m.millisecond=function(b){return this.$g(b,"$ms",a)},m.unix=function(){return Math.floor(this.valueOf()/1e3);
},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(a,h){var j=this,k=!!t.u(h)||h,l=t.p(a),m=function(a,b){var c=t.w(j.$u?Date.UTC(j.$y,b,a):new Date(j.$y,b,a),j);return k?c:c.endOf(e)},n=function(a,b){return t.w(j.toDate()[a].apply(j.toDate(),(k?[0,0,0,0]:[23,59,59,999]).slice(b)),j)},o=this.$W,p=this.$M,q=this.$D,r="set"+(this.$u?"UTC":"");switch(l){case i:return k?m(1,0):m(31,11);case g:return k?m(1,p):m(0,p+1);case f:var s=this.$locale().weekStart||0,u=(o<s?o+7:o)-s;return m(k?q-u:q+(6-u),p);
case e:case"date":return n(r+"Hours",0);case d:return n(r+"Minutes",1);case c:return n(r+"Seconds",2);case b:return n(r+"Milliseconds",3);default:return this.clone()}},m.endOf=function(a){return this.startOf(a,!1)},m.$set=function(f,h){var j,k=t.p(f),l="set"+(this.$u?"UTC":""),m=(j={},j[e]=l+"Date",j.date=l+"Date",j[g]=l+"Month",j[i]=l+"FullYear",j[d]=l+"Hours",j[c]=l+"Minutes",j[b]=l+"Seconds",j[a]=l+"Milliseconds",j)[k],n=k===e?this.$D+(h-this.$W):h;if(k===g||k===i){var o=this.clone().set("date",1);
o.$d[m](n),o.init(),this.$d=o.set("date",Math.min(this.$D,o.daysInMonth())).toDate()}else m&&this.$d[m](n);return this.init(),this},m.set=function(a,b){return this.clone().$set(a,b)},m.get=function(a){return this[t.p(a)]()},m.add=function(a,h){var j,k=this;a=Number(a);var l=t.p(h),m=function(b){var c=s(k);return t.w(c.date(c.date()+Math.round(b*a)),k)};if(l===g)return this.set(g,this.$M+a);if(l===i)return this.set(i,this.$y+a);if(l===e)return m(1);if(l===f)return m(7);var n=(j={},j[c]=6e4,j[d]=36e5,
j[b]=1e3,j)[l]||1,o=this.$d.getTime()+a*n;return t.w(o,this)},m.subtract=function(a,b){return this.add(-1*a,b)},m.format=function(a){var b=this;if(!this.isValid())return"Invalid Date";var c=a||"YYYY-MM-DDTHH:mm:ssZ",d=t.z(this),e=this.$locale(),f=this.$H,g=this.$m,h=this.$M,i=e.weekdays,j=e.months,l=function(a,d,e,f){return a&&(a[d]||a(b,c))||e[d].substr(0,f)},m=function(a){return t.s(f%12||12,a,"0")},n=e.meridiem||function(a,b,c){var d=a<12?"AM":"PM";return c?d.toLowerCase():d},o={YY:String(this.$y).slice(-2),
YYYY:this.$y,M:h+1,MM:t.s(h+1,2,"0"),MMM:l(e.monthsShort,h,j,3),MMMM:j[h]||j(this,c),D:this.$D,DD:t.s(this.$D,2,"0"),d:String(this.$W),dd:l(e.weekdaysMin,this.$W,i,2),ddd:l(e.weekdaysShort,this.$W,i,3),dddd:i[this.$W],H:String(f),HH:t.s(f,2,"0"),h:m(1),hh:m(2),a:n(f,g,!0),A:n(f,g,!1),m:String(g),mm:t.s(g,2,"0"),s:String(this.$s),ss:t.s(this.$s,2,"0"),SSS:t.s(this.$ms,3,"0"),Z:d};return c.replace(k,function(a,b){return b||o[a]||d.replace(":","")})},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15);
},m.diff=function(a,j,k){var l,m=t.p(j),n=s(a),o=6e4*(n.utcOffset()-this.utcOffset()),p=this-n,q=t.m(this,n);return q=(l={},l[i]=q/12,l[g]=q,l[h]=q/3,l[f]=(p-o)/6048e5,l[e]=(p-o)/864e5,l[d]=p/36e5,l[c]=p/6e4,l[b]=p/1e3,l)[m]||p,k?q:t.a(q)},m.daysInMonth=function(){return this.endOf(g).$D},m.$locale=function(){return p[this.$L]},m.locale=function(a,b){if(!a)return this.$L;var c=this.clone(),d=r(a,b,!0);return d&&(c.$L=d),c},m.clone=function(){return t.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf());
},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},l}();return s.prototype=u.prototype,s.extend=function(a,b){return a(b,u,s),s},s.locale=r,s.isDayjs=q,s.unix=function(a){return s(1e3*a)},s.en=p[o],s.Ls=p,s}),function(a){TEMPLATES={"comments-toggle":new a({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<button class="comments-toggle">'),d.b(d.v(d.f("comments_count",a,b,0))),
d.b(" "),d.b(d.v(d.f("i_reply",a,b,0))),d.b("</button>"),d.fl()},partials:{},subs:{}}),comments:new a({code:function(a,b,c){var d=this;return d.b(c=c||""),d.s(d.f("comments",a,b,1),a,b,0,13,418,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b('<li><p class="metadata '),c.s(c.f("deleted",a,b,1),a,b,0,48,55,"{{ }}")&&(c.rs(a,b,function(a,b,c){c.b("deleted")}),a.pop()),c.b('">'),c.s(c.f("deleted",a,b,1),a,b,0,81,103,"{{ }}")&&(c.rs(a,b,function(a,b,c){c.b("<span>[deleted]</span>")}),a.pop()),c.s(c.f("deleted",a,b,1),a,b,1,0,0,"")||(c.b('<a href="https://news.ycombinator.com/user?id='),
c.b(c.v(c.f("user",a,b,0))),c.b('" target="_blank"><b class="user">'),c.b(c.v(c.f("user",a,b,0))),c.b("</b></a>")),c.b('<time><a href="https://news.ycombinator.com/item?id='),c.b(c.v(c.f("id",a,b,0))),c.b('" target="_blank">'),c.b(c.v(c.f("time_ago",a,b,0))),c.b("</a></time></p>"),c.s(c.f("deleted",a,b,1),a,b,1,0,0,"")||(c.b("<p>"),c.b(c.t(c.f("content",a,b,0))),c.b("<ul>"),c.b(c.rp("<comments_list0",a,b,"")),c.b("</ul>")),c.b("</li>")}),a.pop()),d.fl()},partials:{"<comments_list0":{name:"comments_list",
partials:{},subs:{}}},subs:{}}),"post-comments":new a({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<div class="post-content">'),d.s(d.f("has_post",a,b,1),a,b,0,39,573,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b('<header><a href="'),c.b(c.v(c.f("url",a,b,0))),c.b('" target="_blank"><h1>'),c.b(c.v(c.f("title",a,b,0))),c.b("</h1>"),c.s(c.f("user",a,b,1),a,b,0,108,171,"{{ }}")&&(c.rs(a,b,function(a,b,c){c.s(c.f("domain",a,b,1),a,b,0,119,160,"{{ }}")&&(c.rs(a,b,function(a,b,c){c.b('<span class="link-text">'),
c.b(c.v(c.f("domain",a,b,0))),c.b("</span>")}),a.pop())}),a.pop()),c.b('</a><p class="metadata">'),c.s(c.f("user",a,b,1),a,b,0,213,408,"{{ }}")&&(c.rs(a,b,function(a,b,c){c.b('<span class="inline-block">'),c.b(c.v(c.f("points",a,b,0))),c.b(" "),c.b(c.v(c.f("i_point",a,b,0))),c.b(" by "),c.b(c.v(c.f("user",a,b,0))),c.b('</span> <span class="inline-block">'),c.b(c.v(c.f("time_ago",a,b,0))),c.s(c.f("comments_count",a,b,1),a,b,0,340,382,"{{ }}")&&(c.rs(a,b,function(a,b,c){c.b(" &middot; "),c.b(c.v(c.f("comments_count",a,b,0))),
c.b(" "),c.b(c.v(c.f("i_comment",a,b,0)))}),a.pop()),c.b("</span>")}),a.pop()),c.s(c.f("user",a,b,1),a,b,1,0,0,"")||(c.b('<span class="inline-block">'),c.b(c.v(c.f("time_ago",a,b,0))),c.b("</span>")),c.b('<a href="'),c.b(c.v(c.f("hn_url",a,b,0))),c.b('" target="_blank" class="external-link">'),c.b(c.v(c.f("short_hn_url",a,b,0))),c.b("</a></p></header>")}),a.pop()),d.s(d.f("has_content",a,b,1),a,b,0,602,925,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b('<section class="grouped-tableview">'),c.b(c.t(c.f("content",a,b,0))),
c.s(c.f("has_poll",a,b,1),a,b,0,663,902,"{{ }}")&&(c.rs(a,b,function(a,b,c){c.b('<ul class="poll">'),c.s(c.f("poll",a,b,1),a,b,0,689,888,"{{ }}")&&(c.rs(a,b,function(a,b,c){c.b('<li title="'),c.b(c.v(c.f("percentage",a,b,0))),c.b('%"><span class="poll-details"><b>'),c.b(c.v(c.f("item",a,b,0))),c.b('</b> <span class="points">'),c.b(c.v(c.f("points",a,b,0))),c.b(" "),c.b(c.v(c.f("i_point",a,b,0))),c.b('</span></span><div class="poll-bar"><span style="width: '),c.b(c.v(c.f("width",a,b,0))),c.b('"></span></div></li>');
}),a.pop()),c.b("</ul>")}),a.pop()),c.b("</section>")}),a.pop()),d.b('</div><section class="comments">'),d.s(d.f("loading",a,b,1),a,b,0,985,1055,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b('<div class="loader"><i class="icon-loading"></i> Loading&hellip;</div>')}),a.pop()),d.s(d.f("load_error",a,b,1),a,b,0,1082,1165,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b('<div class="load-error">Couldn\'t load comments.<br><button>Try again</button></div>')}),a.pop()),d.s(d.f("loading",a,b,1),a,b,1,0,0,"")||d.s(d.f("load_error",a,b,1),a,b,1,0,0,"")||(d.s(d.f("has_comments",a,b,1),a,b,0,1224,1251,"{{ }}")&&(d.rs(a,b,function(a,b,c){
c.b("<ul>"),c.b(c.rp("<comments_list0",a,b,"")),c.b("</ul>")}),a.pop()),d.s(d.f("has_comments",a,b,1),a,b,1,0,0,"")||d.b('<p class="no-comments">No comments.</p>')),d.b("</section>"),d.fl()},partials:{"<comments_list0":{name:"comments_list",partials:{},subs:{}}},subs:{}}),post:new a({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<li id="story-'),d.b(d.v(d.f("id",a,b,0))),d.b('" data-index="'),d.b(d.v(d.f("i",a,b,0))),d.b('" class="post-'),d.b(d.v(d.f("type",a,b,0))),d.b('"><a href="#/item/'),
d.b(d.v(d.f("id",a,b,0))),d.b('" class="'),d.s(d.f("detail_disclosure",a,b,1),a,b,0,116,133,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b("detail-disclosure")}),a.pop()),d.s(d.f("disclosure",a,b,1),a,b,0,170,180,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b("disclosure")}),a.pop()),d.b(" "),d.s(d.f("selected",a,b,1),a,b,0,209,217,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b("selected")}),a.pop()),d.b('"><div class="number">'),d.b(d.v(d.f("i",a,b,0))),d.b('</div><div class="story"><b>'),d.b(d.v(d.f("title",a,b,0))),
d.b("</b>"),d.s(d.f("user",a,b,1),a,b,0,307,591,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b('<div class="metadata">'),c.s(c.f("domain",a,b,1),a,b,0,340,379,"{{ }}")&&(c.rs(a,b,function(a,b,c){c.b('<div class="link-text">'),c.b(c.v(c.f("domain",a,b,0))),c.b("</div>")}),a.pop()),c.b('<span class="inline-block">'),c.b(c.v(c.f("points",a,b,0))),c.b(" "),c.b(c.v(c.f("i_point",a,b,0))),c.b(" by "),c.b(c.v(c.f("user",a,b,0))),c.b('</span> <span class="inline-block">'),c.b(c.v(c.f("time_ago",a,b,0))),c.s(c.f("comments_count",a,b,1),a,b,0,517,559,"{{ }}")&&(c.rs(a,b,function(a,b,c){
c.b(" &middot; "),c.b(c.v(c.f("comments_count",a,b,0))),c.b(" "),c.b(c.v(c.f("i_comment",a,b,0)))}),a.pop()),c.b("</span></div>")}),a.pop()),d.s(d.f("user",a,b,1),a,b,1,0,0,"")||(d.b('<div class="metadata">'),d.s(d.f("domain",a,b,1),a,b,0,642,687,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b('<span class="link-text">'),c.b(c.v(c.f("domain",a,b,0))),c.b("</span><br>")}),a.pop()),d.b('<span class="inline-block">'),d.b(d.v(d.f("time_ago",a,b,0))),d.b("</span></div>")),d.b("</div></a>"),d.s(d.f("detail_disclosure",a,b,1),a,b,0,791,859,"{{ }}")&&(d.rs(a,b,function(a,b,c){
c.b('<a href="'),c.b(c.v(c.f("url",a,b,0))),c.b('" class="detail-disclosure-button"><span></span></a>')}),a.pop()),d.b("</li>"),d.fl()},partials:{},subs:{}}),"stories-load":new a({code:function(a,b,c){var d=this;return d.b(c=c||""),d.s(d.f("loading",a,b,1),a,b,0,12,82,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b('<div class="loader"><i class="icon-loading"></i> Loading&hellip;</div>')}),a.pop()),d.s(d.f("load_error",a,b,1),a,b,0,109,161,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b('<div class="load-error">Couldn\'t load stories.</div>');
}),a.pop()),d.fl()},partials:{},subs:{}}),visit:new a({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<li>    <a>        <div class="number"></div>        <div class="story">            <b>Last refreshed: '),d.b(d.v(d.f("time_ago",a,b,0))),d.b('</b>            <span class="metadata">                '),d.b(d.v(d.f("visit_count",a,b,0))),d.b(" "),d.b(d.v(d.f("i_visit",a,b,0))),d.b(" total            </span>        </div>    </a></li>"),d.fl()},partials:{},subs:{}})}}(Hogan.Template),function(a){
var b=a.document,c=a.$=function(a){return b.getElementById(a)},d={},e=function(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b},f={pub:function(a,b){var c=d[a];if(c)for(var e=0,f=c.length;e<f;e++)c[e].call(this,b)},sub:function(a,b){d[a]||(d[a]=[]),d[a].push(b)},currentView:null,hideAllViews:function(){for(var a=b.querySelectorAll(".view"),c=0,d=a.length;c<d;c++)a[c].classList.add("hidden")},tmpl:function(a,b){var c=TEMPLATES[a];if(c)return b?c.render(b):c},setTitle:function(a){
var b="HackerWeb";a&&(a=a.replace(/^\s+|\s+$/g,""),a.toLowerCase()!=b.toLowerCase()&&(b=a+" â€“ "+b)),document.title=b}};"undefined"!=typeof ga&&f.sub("logAPIError",function(a){ga("send","event","Errors","API",a)});var g=f.tmpl;amplify.store.sessionStorage&&"function"==typeof amplify.store.sessionStorage||(amplify.store.sessionStorage=amplify.store.memory);var h=b.createElement("a"),i={},j=function(a){var b=i[a];if(b)return b;h.href=a;var c=h.hostname.replace(/^www\./,""),d=h.pathname.replace(/^\//,"").split("/")[0],e=d.length,f=c.length<=25&&e>3&&e<=15&&/^[^0-9][^.]+$/.test(d)?"/"+d:"";
return b=c+f,i[a]=b,b},k=b.querySelector("#view-home .scroll"),l=k.querySelector("section"),m=!1;f.news={options:{disclosure:!0},markupStory:function(a){return/^item/i.test(a.url)?a.url="#/item/"+a.id:(a.external=!0,a.domain=j(a.url)),f.news.options.disclosure?("link"==a.type&&(a.detail_disclosure=!0),/^#\//.test(a.url)&&(a.detail_disclosure=!1,a.disclosure=!0,a.domain=null)):a.id&&(a.url="#/item/"+a.id),a.i_point=1==a.points?"point":"points",a.i_comment=1==a.comments_count?"comment":"comments","visit"==a.type?(a.i_visit=1==a.visit_count?"refresh":"refreshes",
g("visit",a)):g("post",a)},markupStories:function(a,b){var c="";b||(b=1);var d=f.news.markupStory;return a.forEach(function(a){c+=d(a)}),c},updateStory:function(a){if(a&&a.id){var b,d=a.id,e=a.data,g="hacker-news",h=amplify.store(g);if(h)for(var i=0,j=h.length;i<j;i++){var k=h[i];if(d==k.id){b=k;break}}if(!b&&(g="hacker-news2",h=amplify.store(g)))for(var i=0,j=h.length;i<j;i++){var k=h[i];if(d==k.id){b=k;break}}if(b){var l=!1;if(["title","url","time_ago","comments_count","points"].forEach(function(a){
var c=e[a];b[a]!=c&&(b[a]=c,l=!0)}),l){amplify.store(g,h);var m=c("story-"+d);m&&(b.selected=!!m.querySelector("a[href].selected"),b.i=m.dataset?m.dataset.index:m.getAttribute("data-index"),m.insertAdjacentHTML("afterend",f.news.markupStory(b)),m.parentNode.removeChild(m))}}}},render:function(a){if(!m){a||(a={});var b=amplify.store("hacker-news-cached"),c=g("stories-load"),d=function(a){var b=a.slice(),c=amplify.store("next"),d='<ul class="tableview tableview-links" id="hwlist">'+f.news.markupStories(b)+'<li><a class="more-link">More&hellip; ('+c+') <span class="loader"><i class="icon-loading"></i></span></a></li></ul>';
l.innerHTML=d,f.pub("onRenderNews")};if(b){var e=amplify.store("hacker-news"),h=a.delay;h?(m=!0,l.innerHTML=c.render({loading:!0}),setTimeout(function(){m=!1,d(e)},h)):d(e)}else{m=!0,l.innerHTML=c.render({loading:!0});var i=function(){l.innerHTML=c.render({load_error:!0}),f.pub("logAPIError","news")};hnapi.news(null,function(a){return m=!1,!a||a.error?void i():void d(a)},function(a){m=!1,i()})}}},reload:function(){amplify.store("news-latest",null),amplify.store("next",null),f.news.render({})},more:function(a){
if(!a.classList.contains("loading")){a.classList.add("loading");var b=(amplify.store("hacker-news2"),amplify.store("next"));hnapi.news(b,function(b){a.classList.remove("loading");var d=a.parentNode;if(d&&(d.parentNode&&d.parentNode.removeChild(d),b)){var e=b.slice(),g=f.news.markupStories(e);c("hwlist").insertAdjacentHTML("beforeend",g);var h=amplify.store("next");c("hwlist").insertAdjacentHTML("beforeend",'<li><a class="more-link">More&hellip; ('+h+') <span class="loader"></span></a></li>')}})}}
};var n=c("view-comments"),o=n.querySelector("header h1"),p=n.querySelector("section");f.comments={currentID:null,render:function(a){if(a){var c=amplify.store.sessionStorage("hacker-item-"+a);if(f.comments.currentID!=a||!c){f.comments.currentID=a;var d=function(a,c){var d=e(a),h=g("post-comments");if(d.has_post=!!d.title||"comment"==d.type,!d.has_post)return f.setTitle(),o.innerHTML="",p.innerHTML=h.render(d),f.pub("adjustCommentsSection"),void f.pub("onRenderComments");var i=g("comments");if(/^item/i.test(d.url)?d.url="//news.ycombinator.com/"+d.url:d.domain=j(d.url),
d.has_comments=d.comments&&!!d.comments.length,d.i_point=1==d.points?"point":"points",d.i_comment=1==d.comments_count?"comment":"comments",d.has_content=!!d.content,d.poll){var k=0,l=0;d.poll.forEach(function(a){var b=a.points;b>l&&(l=b),k+=b,a.i_point=1==b?"point":"points"}),d.poll.forEach(function(a){var b=a.points;a.percentage=(b/k*100).toFixed(1),a.width=(b/l*100).toFixed(1)+"%"}),d.has_poll=d.has_content=!0}d.short_hn_url="news.ycombinator.com/item?id="+c,d.hn_url="//"+d.short_hn_url,f.setTitle(d.title),
o.innerHTML=d.title;var m=h.render(d,{comments_list:i}),n=b.createElement("div");n.innerHTML=m;for(var q=n.querySelectorAll("a"),r=0,s=q.length;r<s;r++){var t=q[r];t.target="_blank"}var u=d.user;if(u)for(var v=n.querySelectorAll(".user"),r=0,s=v.length;r<s;r++){var w=v[r];w.textContent.trim()==u&&(w.classList.add("op"),w.title="Original Poster")}if(m.length>2e4)for(var x=n.querySelectorAll(".comments>ul>li>ul"),y=g("comments-toggle"),z=0,s=x.length;z<s;z++){var A=x[z],B=A.querySelectorAll(".metadata").length;
A.style.display="none",B&&A.insertAdjacentHTML("beforebegin",y.render({comments_count:B,i_reply:1==B?"reply":"replies"}))}for(;p.hasChildNodes();)p.removeChild(p.childNodes[0]);for(;n.hasChildNodes();)p.appendChild(n.childNodes[0]);delete n,f.pub("onRenderComments")};if(c)p.scrollTop=0,d(c,a);else{var h=amplify.store("hacker-news");if(h)for(var i=0,k=h.length;i<k;i++){var l=h[i];if(a==l.id){c=l;break}}if(!c){var h=amplify.store("hacker-news2");if(h)for(var i=0,k=h.length;i<k;i++){var l=h[i];if(a==l.id){
c=l;break}}}c?(c.loading=!0,d(c,a)):d({loading:!0},a);var m=function(){c?(delete c.loading,c.load_error=!0,d(c,a)):d({load_error:!0},a),f.pub("logAPIError","comments")};hnapi.item(a,function(b){if(f.comments.currentID==a){if(!b||b.error&&"comments"==f.currentView)return void m();amplify.store.sessionStorage("hacker-item-"+a,b,{expires:3e5}),f.news.updateStory({id:a,data:b}),d(b,a)}},function(b){f.comments.currentID==a&&m()})}}}},toggle:function(a){var b=a.nextElementSibling;if(b){var c=b.style,d=p.scrollTop;
c.display="none"==c.display?"":"none",p.scrollTop=d}},reload:function(){f.comments.currentID=null,ruto.reload()}},f.init=function(){amplify.store("next",null),f.news.render(),ruto.init()},a.hw=f,ruto.config({before:function(a,b){f.hideAllViews();var d=c("view-"+b);d.classList.remove("hidden"),f.currentView=b,f.setTitle(d.querySelector("header h1").textContent)},notfound:function(){ruto.go("/")}}).add("/","home").add("/about","about").add(/^\/item\/(\d+)$/i,"comments",function(a,b){f.comments.render(b);
})}(window),function(a){if(a.addEventListener){var b,c=a.document,d=(c.body,{}),e=function(){return a.pageYOffset||"CSS1Compat"===c.compatMode&&c.documentElement.scrollTop||0},f=function(){var a=location.hash.slice(1),b=d[a]=e(),c="hacker-scrolltop-"+a;amplify.store.sessionStorage(c,b)};a.addEventListener("scroll",function(){clearTimeout(b),b=setTimeout(f,500)},!1),ruto.config({on:function(){var b=location.hash.slice(1),c="hacker-scrolltop-"+b,f=amplify.store.sessionStorage(c);a.scrollTo(0,d[b]||f||0),
f=d[b]=e(),amplify.store.sessionStorage(c,f)}});var g=c.head||c.getElementsByTagName("head")[0],h=function(){var b=a.innerHeight,d=$("view-height");d||(d=c.createElement("style"),d.id="view-height",g.appendChild(d)),a.innerWidth>=788&&(b*=.9),d.textContent=".view>.scroll{min-height: "+b+"px}"};if(a.addEventListener("resize",h,!1),a.addEventListener("orientationchange",h,!1),h(),ibento("#view-home-refresh","click",hw.news.reload),ibento("#view-home .more-link","click",function(a,b){hw.news.more(b);
}),ibento("button.comments-toggle","click",function(a,b){hw.comments.toggle(b)}),ibento("#view-comments .load-error button","click",hw.comments.reload),/Mobile;.*Firefox/.test(navigator.userAgent)&&navigator.mozApps){var i=navigator.mozApps.getSelf();i.onsuccess=function(){i.result&&ibento('a[href]:not([href^="#"])',"click",function(a,b){a.preventDefault(),window.open(b.href,"browser")})}}window.onload=hw.init}}(window);
//# sourceMappingURL=hw-web.min.js.map